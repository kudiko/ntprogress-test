# Тестовое задание в NT Progress, Кудимов Дмитрий

## Описание

Согласно заданию была написана игрушечная биржа, поддерживающая покупку и продажу долларов. 

Серверная часть состоит из трех кусков: 
ServerIO (основной класс сервера, в файле ServerIO.cpp также находится main для сервера), в него вложен MarketExecution(
основная часть работы биржи - добавление и мэтчинг заявок), а в него, в свою очередь, ServerDatabase(здесь храним логины 
и айди клиентов, и регистрируем новых).

Клиентская часть представляет собой простое консольное приложение с меню на цикле while.
Здесь весь функционал умещается в один класс. 

Из дополнительных файлов был добавлен test_framework.h, удобный
и несложный знакомый мне макросовый тестер, который выводит результаты тестов в удобном виде.

Были написаны тесты, проверяющие работу мэтчинга заявок и их добавления - основного функционала. 
В идеале все остальное тоже бы покрыть тестами.

Из бонусных пунктов были сделаны:
- Отмена заявок (реализована дополнительным пунктом в меню, для того чтобы найти ID активных заявок нужно выбрать в меню Trade History)
- После добавления и исполнения каждой заявки отправка информации в БД Postgres (реализовано путем использования библиотеки libpqxx).
## Ограничения реализации
- Авторизация осуществляется исключительно по введенному логину(имени). При повторном переподключении, вводя то же имя,
вы будете представлять того же клиента
- Для исключения возни с округлением вещественных чисел, все цены и объемы целые
- Баг: при общении с базой данных Postgres с помощью транзакционного объекта при направлении двух запросов почему-то 
второй не всегда выполняется, пока нет осознания почему так происходит 

## Установка и настройка
Необходимо иметь установленными Boost, сервер PostgreSQL, библиотеку libpqxx. Есть надежда, что CMake найдет сам
все нужное (с последней библиотекой, согласно интернету, зависимо от версии могут быть проблемы с автоматическим нахождением).

В папке с проектом через терминал:
```shell
cmake .
cmake --build .
```
Для запуска, из той же папки проекта:
```shell
./Server
./Client
```

Для подключения к вашей базе данных Postgres нужно передать в main для сервера в конструктор класса ServerIO вторым параметром
параметры подключения к БД в формате строки
```shell
"dbname = stock-market user = postgres password = postgres hostaddr = 127.0.0.1 port = 5432"
```
Если БД не хочется использовать, то нужно закомментировать в main сервера строку с конструктором класса ServerIO с двумя параметрами,
и раскомментировать конструктор с одним параметром.